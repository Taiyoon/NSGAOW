digraph CoopTaskFlowChart {
    // rankdir = TB;
    ranksep = 0.2;
    node [shape = box;];
    splines = false;
    minlen = 0;
    layout = "dot";
    
    // node [margin = 0;];
    Start [label = "开始";shape = "box";style = rounded;];
    InitPrivate [label = "首次请求包含\n隐私数据";];
    IsFinish [label = "任务是否完成";shape = "diamond";];
    IsPrivate [label = "本次请求是否\n包含隐私数据";shape = "diamond";];
    Finish [label = "结束";shape = "box";style = rounded;];
    PrivCompute -> IsFinish;
    PubCompute -> IsFinish;
    // SetNextPriv -> IsFinish;
    // SetNextNoPriv -> IsFinish;
    Start -> InitPrivate -> IsPrivate;
    IsFinish -> IsPrivate [label = "否"; constraint = false;];
    IsPrivate -> PrivTrans [label = "是";];
    IsPrivate -> PubTrans [label = "否";];
    IsFinish -> Finish [label = "是";];
    
    subgraph cluster_priv {
        color = red;
        PrivTrans [label = "在私有云\n传输";];
        PrivCompute [label = "在私有云\n计算";];
        // SetNextNoPriv [label = "下次请求不包含\n隐私数据";];
        PrivTrans -> PrivCompute;
        // -> SetNextNoPriv;
    }
    
    subgraph cluster_pub {
        color = blue;
        PubTrans [label = "在公有云\n传输";];
        PubCompute [label = "在公有云\n计算";];
        // SetNextPriv [label = "下次请求包含\n隐私数据";];
        PubTrans -> PubCompute;
        // -> SetNextPriv;
    }
}